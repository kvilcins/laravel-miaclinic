"use strict";(self.webpackChunksynergine=self.webpackChunksynergine||[]).push([[9678],{9678:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var i=r(4967),o=r(9755);function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function _callSuper(e,t,r){return t=_getPrototypeOf(t),function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_isNativeReflectConstruct()?Reflect.construct(t,r||[],_getPrototypeOf(e).constructor):t.apply(e,r))}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}var n=function(e){function YandexSearch(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,YandexSearch),_callSuper(this,YandexSearch,arguments)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(YandexSearch,e),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(YandexSearch,[{key:"_init",value:function _init(){return this.$search_page=o('[data-js="search-page"]'),!!this.$search_page.length&&(this.$results=o('[data-js-search-page="results"]'),this.$load_more=o('[data-js-search-page="load-more"]'),this.$placeholder=o('[data-js-search-page="placeholder"]'),this.$no_result=o('[data-js-search-page="no-result"]'),this.more_text="Показать ещё",this.load_text="Загрузка…",this.param_name="text",this.$list=null,this.timer=null,!0)}},{key:"_bind",value:function _bind(){var e=this.getQuery();return o.trim(e)?(this.fetchData(),!0):(this.renderNoResults(),!0)}},{key:"getQuery",value:function getQuery(){var e=null,t=this,r=[];return location.search.substr(1).split("&").forEach((function(i){(r=i.split("="))[0]===t.param_name&&(e=decodeURIComponent(r[1]))})),e}},{key:"fetchData",value:function fetchData(){var e=this;return this.$list=o(".b-serp-list"),this.placeholderShow(),this.noResultHide(),null===this.timer&&(this.timer=0),this.$list.length?(this.timer=null,this.renderResult(),!0):(this.timer+=100,this.timer>1e4?(this.renderNoResults(),!0):void setTimeout((function(){e.fetchData()}),100))}},{key:"placeholderHide",value:function placeholderHide(){this.$placeholder.hide()}},{key:"placeholderShow",value:function placeholderShow(){if(o(".search__results__item").length)return!1;this.$placeholder.show()}},{key:"noResultHide",value:function noResultHide(){this.$no_result.hide()}},{key:"noResultShow",value:function noResultShow(){if(o(".search__results__item").length)return!1;this.$no_result.show()}},{key:"renderResult",value:function renderResult(){var e=this,t=null,r=null,i=null,n=null,s=null;this.placeholderHide(),this.$list.find(".b-serp-item").each((function(a,l){t=o(l),r=t.find(".b-serp-item__title-link").attr("href"),i=t.find(".b-serp-item__title-link").text(),n=t.find(".b-serp-item__text").html();var u=o("<div/>",{class:"grid-wrap grid-wrap_info-block_search search__results__item"}),c=o("<div/>").append(o("<div/>",{class:"info-block__title"}).html(i)).append(o("<div/>",{class:"info-block__description"}).html(n));s=o("<a/>",{class:"link link_with-arrow",target:"_blank",href:r}).text("Подробнее");var h=o("<div/>",{class:"info-block__right"}).append(s);u.append(c),u.append(h),e.$results.append(u)}));var a=o("#ya-site-results").find(".b-pager__next");a.length?(this._bindTo(this.$load_more,"click",(function(){return e.$load_more.is("[disabled]")||e.loadMore(a),!1})),this.$load_more.text(this.more_text),this.$load_more.removeAttr("disabled"),this.$load_more.show()):this.$load_more.hide()}},{key:"renderNoResults",value:function renderNoResults(){this.placeholderHide(),this.noResultShow()}},{key:"loadMore",value:function loadMore(e){this.$load_more.text(this.load_text),this.$load_more.attr("disabled","disabled"),this.$list.remove(),e.get(0).click(),this.fetchData()}}]),YandexSearch}(i.default)}}]);