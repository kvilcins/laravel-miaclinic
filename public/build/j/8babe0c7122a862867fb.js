"use strict";(self.webpackChunksynergine=self.webpackChunksynergine||[]).push([[3166],{3166:(e,i,t)=>{t.r(i),t.d(i,{default:()=>ImagePreview});var a=t(4967),d=t(4520),s=t(9755),n=t(6885);class ImagePreview extends a.default{_bind(){return this._liveBindTo('[data-js="image-preview"]',"change",(e=>{this.readURL(e.currentTarget)})),this._bindTo(s(n),"modal:opened",(()=>{this.updatePickSizes()})),this._bindTo(s(n),"image-preview:update",(()=>{this.updatePickSizes()})),!0}readURL(e){let i,t=s(e),a=t.closest(".image-placeholder");if(a.length||(a=t.next(".image-placeholder")),i=a.find("video").length>0?a.find("video"):a.find("img"),e.files&&e.files[0]){let a=new FileReader,s=e.files[0].type;if("image/jpg"!==s&&"image/jpeg"!==s&&"image/png"!==s&&"image/bmp"!==s&&"image/svg+xml"!==s&&"image/webp"!==s&&"video/mp4"!==s&&"video/x-m4v"!==s)return e.value="",new d.default({type:"info",text:"Разрешён только .jpg, .png, .bmp, .svg .webp и .mp4 формат"}),!1;a.onload=e=>{this._bindTo(i,"load",(()=>{t.css({width:i.width(),height:i.height()})})),i.attr("src",e.target.result)},a.readAsDataURL(e.files[0])}}updatePickSizes(){s(".image-placeholder").each(((e,i)=>{let t,a=s(i),d=a.find('input[type="file"]');t=a.find("video").length>0?a.find("video"):a.find("img"),this.updateSizes(d,t),this._bindTo(t,"load",(()=>{this.updateSizes(d,t)}))}))}updateSizes(e,i){setTimeout((()=>{e.css({width:i.width(),height:i.height()})}),500)}}}}]);