"use strict";(self.webpackChunksynergine=self.webpackChunksynergine||[]).push([[4584],{4584:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Dataset});var i=a(4967),s=a(1474),d=a(767),n=a(9755),l=a(6885);class Dataset extends i.default{_init(){return!0}_bind(){return this._liveBindTo('[data-js="item-delete"]',"click",(e=>{this.deleteOrRestore(n(e.target))})),this._liveBindTo('[data-js="item-restore"]',"click",(e=>{this.deleteOrRestore(n(e.target))})),this._bindTo(n(l),"modal:opened",((e,t)=>{let a=this._nullSafe((()=>t.$modal));this.initSortable(a),this.initAddItems(a)})),!0}deleteOrRestore(e){let t=e.closest('[data-js="dataset-delete-wrapper"]'),a=t.find("input");return e.is('[data-js="item-delete"]')?(t.addClass("deleted"),a.val(1),!1):e.is('[data-js="item-restore"]')?(t.removeClass("deleted"),a.val(0),!1):this}initSortable(e){e.find(".dataset__items").each(((e,t)=>{let a=n(t),i=a.find('[data-js="ace-editor-wrapper"]');s.ZP.create(t,{handle:".dataset__item__move",onStart:()=>{a.find("textarea").prop("disabled",!0),i.length&&(i.css({"pointer-events":"none",opacity:.4}),i.find(".ace_gutter-layer").css({"pointer-events":"none"}))},onEnd:()=>{a.find("textarea").prop("disabled",!1),i.length&&(i.css({"pointer-events":"initial",opacity:1}),i.find(".ace_gutter-layer").css({"pointer-events":"auto"}))}})}))}initAddItems(e){let t=e.find('[data-js="dataset__add-item"]'),a=e.find(".dataset__items");this._bindTo(t,"click",(()=>{let t=a.find("> *").last(),i=t.clone();i.find(":input").val(""),i.removeAttr("style"),i.insertBefore(t),new d.default({$scroll_element:e})}))}}}}]);